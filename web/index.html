<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8"/>
        <script src="wasm_exec.js"></script>
        <script>
            const go = new Go();
            WebAssembly.instantiateStreaming(fetch("repl-lib.wasm"), go.importObject).then((result) => {
                go.run(result.instance);
            });
        </script>
    </head>
    <body>
        <input id="inp" type="text" />
        <div id="out"></div>
        <button id="eval-btn">Eval</button>

        <script>
            const inpElt = document.getElementById("inp");
            const outElt = document.getElementById("out");
            const evalBtn = document.getElementById("eval-btn");

            evalBtn.addEventListener("click", () => {
                const inpStr = inpElt.value;

                evalBtn.setAttribute("disabled", "");

                const outStr = goReplEval(inpStr);

                outElt.textContent = outStr;
                
                evalBtn.removeAttribute("disabled");
            });
        </script>
    </body>
</html>
